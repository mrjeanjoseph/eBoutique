@{ ViewBag.Title = "TBS Employees"; }

<h2>Employee Details</h2>

<a class="btn btn-primary mb-3" onclick="PopupForm('@Url.Action("AddorEdit", "TBS_Employee")')">&#x271A; Add New</a>
<table id="employeeTable" class="table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th>FullName</th>
            <th>Position</th>
            <th>Office Loc</th>
            <th>Age</th>
            <th>Salary</th>
        </tr>
    </thead>
</table>

@section scripts{
    <script>

        var Popup, dataTable;

        $(document).ready(function () {
            dataTable = $('#employeeTable').DataTable({
                "ajax": {
                    "url": "/TBS_Employee/GetData",
                    "type": "GET",
                    "datatype": "json"
                },
                "columns": [
                    { "data": "FullName" },
                    { "data": "Position" },
                    { "data": "OfficeLoc" },
                    { "data": "Age" },
                    { "data": "Salary" }
                ],
                "language": {
                    "emptyTable": "No Employee Data Found."
                }
            })
        });


        function PopupForm(url) {
            var formDiv = $('<div/>');

            $.get(url).done(function (response) {
                formDiv.html(response);

                Popup = formDiv.dialog({
                    autoOpen: true,
                    resizable: false,
                    title: 'Fill Employee Details',
                    height: 500,
                    width: 700,
                    close: function () {
                        Popup.dialog('destroy').remove();
                    }
                });
            });
        }
    </script>
}