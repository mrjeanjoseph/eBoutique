
@{
    ViewBag.Title = "Index";
}

<h2>Accenture Employee</h2>


<table class="table table-hover" id="AccEmpData">
    <thead class="table-dark">
        <tr>
            <th>#</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Department</th>
            <th>Position Type</th>
            <th>Salary</th>
            <th>City Name</th>
            <th class="text-center">Action</th>
        </tr>
    </thead>
</table>


@section scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            LoadEmployee();
        });

        function EditEmployee(employeeId) {
            alert(`Employee Id: ${employeeId}`)
        }

        function DeleteEmployee(employeeId) {
            alert(`Employee Id: ${employeeId}`)
        }

        function SaveDataEntry() {
            var EmployeeObject = {
                EmployeeId : $("#EmployeeId").val(),
                FirstName: $("#firstNameInput").val(),
                LastName: $("#lastNameInput").val(),
                Department: $("#departmentInput").val(),
                PositionType: $("#PositionTypeInput").val(),
                Salary: $("#salaryInput").val(),
                CityId: $("#Cities").val()
            }

            $.ajax({
                async: true,
                type: 'POST',
                url: '/AccEmp/AddUpdateEmployee',
                data: JSON.stringify(EmployeeObject),
                dataType: 'JSON',
                contentType: 'application/json; charset=utf-8',
                success: function (result) {

                },
                error: function (result) {
                    alert('An error has occurred!');
                }
            });
        }

        function LoadEmployee() {
            var accEmpData = "";

            $.ajax({
                async: true,
                type: 'GET',
                url: '/AccEmp/GetAllEmployee',
                dataType: 'JSON',
                contentType: 'application/json; charset=utf-8',
                success: function (result) {
                    if (result.Success) {
                        $.each(result.data, function (index, value) {
                            accEmpData += `
                            <tr>
                                <td> ${index + 1} </td>
                                <td> ${value.FirstName} </td>
                                <td> ${value.LastName} </td>
                                <td> ${value.Department} </td>
                                <td> ${value.PositionType} </td>
                                <td> ${value.Salary} </td>
                                <td> ${value.CityName} </td>
                                <td>
                                   <input type="button" class="btn btn-warning btn-sm" value="Edit" onclick=EditEmployee(${value.EmployeeId})>
                                   <input type="button" class="btn btn-danger btn-sm" value="Delete" onclick=DeleteEmployee(${value.EmployeeId})>
                                </td>
                            </tr>
                            `;
                        });

                        $('#AccEmpData').append(accEmpData);
                    }
                },
                error: function (result) {
                    alert('There are errors in return your data.')
                }
            });
        }

    </script>
}


<input type="hidden" value="0" id="employeeId" />

<table class="mt-3">
    <tr>
        <td>First Name</td>
        <td><input type="text" name="FirstName" id="firstNameInput" /></td>
    </tr>
    <tr>
        <td>Last Name</td>
        <td><input type="text" name="LastName" id="lastNameInput" /></td>
    </tr>
    <tr>
        <td>Department</td>
        <td><input type="text" name="Department" id="departmentInput" /></td>
    </tr>
    <tr>
        <td>Position Type</td>
        <td><input type="text" name="PositionType" id="PositionTypeInput" /></td>
    </tr>
    <tr>
        <td>Salary</td>
        <td><input type="text" name="Salary" id="salaryInput" /></td>
    </tr>
    <tr>
        <td>City Name</td>
        <td>@Html.DropDownList("Cities", @ViewBag.Cities as IEnumerable<SelectListItem>)</td>
    </tr>
    <tr>
        <td></td>
        <td>
            <input type="button" class="btn btn-primary" id="btnSave" value="Add Employee" onclick="SaveDataEntry()" />
            <input type="button" class="btn btn-danger" id="btnDelete" value="Reset Entry" onclick="ResetDataEntry()" />
        </td>
    </tr>
</table>